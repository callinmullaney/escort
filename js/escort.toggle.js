!function(e,i){"use strict";function t(t){this.$trigger=e(t),this.region=this.$trigger.data("region"),this.event=this.$trigger.data("event"),this.$region=e("#escort-"+this.region),this.$region.length?(this.$document=e(i),this.$body=e("body"),this.setup()):this.$trigger.remove()}e.extend(t,{instances:[]}),e.extend(t.prototype,{lock:!1,active:!1,setup:function(){var e=this;switch(e.$region.addClass("escort-instant"),e.$trigger.on("click",function(i){i.preventDefault(),e.active?e.hideMini():e.showMini()}),e.event){case"hover":e.$trigger.hover(function(i){i.preventDefault(),e.showMini()},function(i){i.preventDefault(),e.hideMini()}),e.$region.on("escort-region-expanded:show",function(){e.$trigger.addClass("is-active")}).on("escort-region-expanded:hide",function(){e.$trigger.removeClass("is-active")})}},showMini:function(i){var t=this;t.active||(t.active=!0,t.$body.addClass("show-escort-mini-"+t.region),t.$body.trigger("escort-toggle-mini:show",[t.$region]),"click"===t.event&&(t.$trigger.addClass("is-active"),setTimeout(function(){t.$document.on("click.escort-mini-"+t.region,function(i){t.active&&!e(i.target).closest(t.$region).length&&t.hideMini()})},10)))},hideMini:function(e){var i=this;i.active&&(i.active=!1,i.$body.removeClass("show-escort-mini-"+i.region),i.$body.trigger("escort-region-mini:hide",[i.$region]),"click"===i.event&&(i.$trigger.removeClass("is-active"),i.$document.off("click.escort-mini-"+i.region)))}}),Drupal.behaviors.escortToggle={attach:function(i){var n=e(i).find(".escort-toggle").once("escort-toggle").addClass("escort-toggle-processed");if(n.length)for(var o=0;o<n.length;o++)t.instances.push(new t(n[o]))}},Drupal.EscortRegionToggles=t}(jQuery,document);